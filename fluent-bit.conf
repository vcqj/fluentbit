[SERVICE]
    Flush        1
    Daemon       Off
    Log_Level    info
    Parsers_File /fluent-bit/etc/parsers.conf

[INPUT]
    Name        tail
    Path        /logs/*.log
    Tag         app.todo
    Parser      pino
    Mem_Buf_Limit 10MB
    Refresh_Interval 5
    Skip_Long_Lines On

# Tag the stream source (no PII)
[FILTER]
    Name        modify
    Match       app.todo
    Add         source  server

[OUTPUT]
    Name            opensearch
    Match           app.todo
    Host            opensearch
    Port            9200
    Index           todo-logs
    Logstash_Format On
    Logstash_Prefix todo-logs
    Suppress_Type_Name On
    Replace_Dots    On
    tls             Off

# Optional: mirror to stdout for quick debugging (safe to keep)
[OUTPUT]
    Name            stdout
    Match           app.todo

